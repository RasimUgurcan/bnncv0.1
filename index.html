<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Binance TarzÄ± CanlÄ± Kripto Paneli</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">

  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #121212;
      color: #eaeaea;
      margin: 0;
      padding: 20px;
    }
    h2 {
      text-align: center;
      color: #f3ba2f; /* Binance sarÄ±sÄ± */
      margin-bottom: 20px;
    }
    table.dataTable {
      background: #1e1e1e;
      border-radius: 10px;
      overflow: hidden;
      border: none;
      color: #eaeaea;
    }
    thead {
      background: #2a2a2a;
      color: #f3ba2f;
      font-size: 15px;
    }
    table.dataTable tbody tr {
      background: #1e1e1e;
      transition: background 0.2s ease;
    }
    table.dataTable tbody tr:hover {
      background: #2a2a2a;
    }
    td {
      padding: 12px;
      text-align: center;
      font-size: 14px;
    }
    .buy {
      color: #00ff88;
      font-weight: bold;
    }
    .sell {
      color: #ff4d4d;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h2>ðŸ“Š Binance TarzÄ± CanlÄ± Kripto Paneli</h2>
  <table id="cryptoTable" class="display" style="width:100%">
    <thead>
      <tr>
        <th>Coin</th>
        <th>Fiyat (USDT)</th>
        <th>24s DeÄŸiÅŸim</th>
        <th>Sinyal</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    let table = $('#cryptoTable').DataTable({
      paging: false,
      searching: false,
      info: false
    });

    // Takip edilecek coinler
    let symbols = ["btcusdt","ethusdt","bnbusdt","xrpusdt","solusdt"];

    // Binance WebSocket stream
    let streams = symbols.map(s => s + "@ticker").join("/");
    let ws = new WebSocket(`wss://stream.binance.com:9443/stream?streams=${streams}`);

    ws.onmessage = function(event) {
      let msg = JSON.parse(event.data);
      let data = msg.data;

      let symbol = data.s;
      let price = parseFloat(data.c).toFixed(2);
      let change = parseFloat(data.P).toFixed(2);

      let signalClass = change >= 0 ? "buy" : "sell";
      let signalText  = change >= 0 ? "AL" : "SAT";

      // SatÄ±r gÃ¼ncelleme
      let row = table.row(function(idx, d, node) {
        return d[0] === symbol;
      });

      if (row.node()) {
        row.data([
          symbol,
          `$${price}`,
          `<span class="${signalClass}">${change}%</span>`,
          `<span class="${signalClass}">${signalText}</span>`
        ]).draw(false);
      } else {
        table.row.add([
          symbol,
          `$${price}`,
          `<span class="${signalClass}">${change}%</span>`,
          `<span class="${signalClass}">${signalText}</span>`
        ]).draw(false);
      }
    };
  </script>
</body>
</html>
